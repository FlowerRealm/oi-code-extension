
> oi-code@0.0.1 test
> npm run compile && tsc -p ./src/test/tsconfig.json && node ./out/test/runTest.js


> oi-code@0.0.1 compile
> webpack --mode development

assets by path *.html 22.4 KiB
  asset init.html 10.4 KiB [compared for emit] [from: webview/init.html] [copied]
  asset settings.html 9.91 KiB [compared for emit] [from: webview/settings.html] [copied]
  asset completion.html 2.13 KiB [compared for emit] [from: webview/completion.html] [copied]
asset extension.js 264 KiB [compared for emit] (name: main) 1 related asset
asset settings-schema.json 2.36 KiB [compared for emit] [from: webview/settings-schema.json] [copied]
cacheable modules 253 KiB
  modules by path ./node_modules/diff/lib/ 210 KiB 19 modules
  modules by path ./src/ 43.6 KiB
    ./src/extension.ts 26.9 KiB [built] [code generated]
    ./src/dockerManager.ts 11.2 KiB [built] [code generated]
    ./src/docker/install.ts 5.48 KiB [built] [code generated]
external "vscode" 42 bytes [built] [code generated]
external "path" 42 bytes [built] [code generated]
external "child_process" 42 bytes [built] [code generated]
external "util" 42 bytes [built] [code generated]
external "fs" 42 bytes [built] [code generated]
external "os" 42 bytes [built] [code generated]
external "fs/promises" 42 bytes [built] [code generated]
webpack 5.101.0 compiled successfully in 1243 ms
- Resolving version...
âœ” Validated version: 1.103.0
âœ” Found existing install in /home/flowerrealm/oi-code/extensions/oi-code/.vscode-test/vscode-linux-x64-1.103.0
[90m[main 2025-08-13T02:21:47.058Z][0m update#setState disabled
[90m[main 2025-08-13T02:21:47.059Z][0m update#ctor - updates are disabled by the environment
Via 'product.json#extensionEnabledApiProposals' extension 'ms-vsliveshare.vsliveshare' wants API proposal 'notebookCellExecutionState' but that proposal DOES NOT EXIST. Likely, the proposal has been finalized (check 'vscode.d.ts') or was abandoned.
Via 'product.json#extensionEnabledApiProposals' extension 'ms-python.gather' wants API proposal 'notebookCellExecutionState' but that proposal DOES NOT EXIST. Likely, the proposal has been finalized (check 'vscode.d.ts') or was abandoned.
Via 'product.json#extensionEnabledApiProposals' extension 'ms-python.vscode-pylance' wants API proposal 'mcpConfigurationProvider' but that proposal DOES NOT EXIST. Likely, the proposal has been finalized (check 'vscode.d.ts') or was abandoned.
Started local extension host with pid 40596.
ChatSessionStore: Migrating 0 chat sessions from storage service to file system
Loading development extension at /home/flowerrealm/oi-code/extensions/oi-code
Settings Sync: Account status changed from uninitialized to unavailable
[0m[0m
[0m  Extension Test Suite[0m
Ensuring Docker image is ready before running tests...
Docker image is ready.
Docker image 'oi-runner:stable' already exists.
  [32m  âœ”[0m[90m showSettingsPage command should create a webview panel[0m[31m (1502ms)[0m
[0m  OI-Code Commands Test Suite[0m
Docker is already installed: Docker version 28.3.3, build 980b856

  [32m  âœ”[0m[90m should execute oicode.downloadDocker command[0m
[0m    Code Execution Tests (requires Docker environment)[0m
Executing oicode.runCode for C...
    [31m  1) should create and run C Hello World[0m
Executing oicode.runCode for C++...
    [31m  2) should create and run C++ Hello World[0m
Executing oicode.runCode for Python...
    [31m  3) should create and run Python Hello World[0m
[0m  Extension Test Suite[0m
  [32m  âœ”[0m[90m showSettingsPage command should create a webview panel[0m[31m (1503ms)[0m
[0m  OI-Code Commands Test Suite[0m
Docker is already installed: Docker version 28.3.3, build 980b856

  [32m  âœ”[0m[90m should execute oicode.downloadDocker command[0m
[0m    Code Execution Tests (requires Docker environment)[0m
Docker image 'oi-runner:stable' already exists.
oicode.runCode for C finished, result: undefined
    [31m  4) should create and run C Hello World[0m
oicode.runCode for C++ finished, result: undefined
    [31m  5) should create and run C++ Hello World[0m
oicode.runCode for Python finished, result: undefined
    [31m  6) should create and run Python Hello World[0m
[92m [0m[32m 4 passing[0m[90m (6m)[0m
[31m  6 failing[0m
[0m  1) OI-Code Commands Test Suite
       Code Execution Tests (requires Docker environment)
         should create and run C Hello World:
[0m[31m     Error: Timeout of 60000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/home/flowerrealm/oi-code/extensions/oi-code/out/test/suite/extension.test.js)[0m[90m
  	at listOnTimeout (node:internal/timers:588:17)
  	at process.processTimers (node:internal/timers:523:7)
[0m
[0m  2) OI-Code Commands Test Suite
       Code Execution Tests (requires Docker environment)
         should create and run C++ Hello World:
[0m[31m     Error: Timeout of 60000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/home/flowerrealm/oi-code/extensions/oi-code/out/test/suite/extension.test.js)[0m[90m
  	at listOnTimeout (node:internal/timers:588:17)
  	at process.processTimers (node:internal/timers:523:7)
[0m
[0m  3) OI-Code Commands Test Suite
       Code Execution Tests (requires Docker environment)
         should create and run Python Hello World:
[0m[31m     Error: Timeout of 60000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/home/flowerrealm/oi-code/extensions/oi-code/out/test/suite/extension.test.js)[0m[90m
  	at listOnTimeout (node:internal/timers:588:17)
  	at process.processTimers (node:internal/timers:523:7)
[0m
[0m  4) OI-Code Commands Test Suite
       Code Execution Tests (requires Docker environment)
         should create and run C Hello World:
[0m[31m     Error: Timeout of 60000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/home/flowerrealm/oi-code/extensions/oi-code/out/test/test/suite/extension.test.js)[0m[90m
  	at listOnTimeout (node:internal/timers:588:17)
  	at process.processTimers (node:internal/timers:523:7)
[0m
[0m  5) OI-Code Commands Test Suite
       Code Execution Tests (requires Docker environment)
         should create and run C++ Hello World:
[0m[31m     Error: Timeout of 60000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/home/flowerrealm/oi-code/extensions/oi-code/out/test/test/suite/extension.test.js)[0m[90m
  	at listOnTimeout (node:internal/timers:588:17)
  	at process.processTimers (node:internal/timers:523:7)
[0m
[0m  6) OI-Code Commands Test Suite
       Code Execution Tests (requires Docker environment)
         should create and run Python Hello World:
[0m[31m     Error: Timeout of 60000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves. (/home/flowerrealm/oi-code/extensions/oi-code/out/test/test/suite/extension.test.js)[0m[90m
  	at listOnTimeout (node:internal/timers:588:17)
  	at process.processTimers (node:internal/timers:523:7)
[0m
Error: 6 tests failed.
	at /home/flowerrealm/oi-code/extensions/oi-code/out/test/suite/index.js:62:27
	at done (/home/flowerrealm/oi-code/extensions/oi-code/node_modules/mocha/lib/mocha.js:1030:7)
[90m[main 2025-08-13T02:27:51.456Z][0m Extension host with pid 40596 exited with code: 0, signal: unknown.
Exit code:   1
Failed to run tests
