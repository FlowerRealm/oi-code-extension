<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pair Check</title>
    <style>
        body, html {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
                "Helvetica Neue", Arial, "Noto Sans", sans-serif,
                "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
                "Noto Color Emoji";
            color: var(--vscode-editor-foreground);
            background-color: var(--vscode-editor-background);
        }
        .container { display: flex; flex-direction: column; height: 100%; }
        .input-section {
            display: flex;
            flex-direction: column;
            padding: 8px;
            border-bottom: 1px solid var(--vscode-panel-border);
        }
        .input-section textarea {
            flex-grow: 1;
            width: 98%;
            border: 1px solid var(--vscode-input-border);
            background-color: var(--vscode-input-background);
            color: var(--vscode-input-foreground);
            font-family: var(--vscode-editor-font-family);
        }
        .input-section button {
            margin-top: 8px;
            width: 100px;
            border: 1px solid var(--vscode-button-border);
            background-color: var(--vscode-button-background);
            color: var(--vscode-button-foreground);
        }
        .input-section button:hover { background-color: var(--vscode-button-hoverBackground); }
        .output-section { flex-grow: 1; display: flex; flex-direction: row; overflow: hidden; }
        .output-box {
            flex: 1;
            padding: 8px;
            overflow: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
            font-family: var(--vscode-editor-font-family);
        }
        #output1-container { border-right: 1px solid var(--vscode-panel-border); }
        h4 { margin-top: 0; margin-bottom: 8px; }
        .diff-added { background-color: var(--vscode-editorGutter-addedBackground); }
        .diff-removed { background-color: var(--vscode-editorGutter-deletedBackground); }
    </style>
</head>
<body>
    <div class="container">
        <div class="input-section">
            <label for="input-data">Input data:</label>
            <textarea id="input-data" rows="5"></textarea>
            <button id="run-button">Run Pair Check</button>
        </div>
        <div class="output-section">
            <div id="output1-container" class="output-box">
                <h4>Left Code Output</h4>
                <div id="output1-content"></div>
            </div>
            <div id="output2-container" class="output-box">
                <h4>Right Code Output</h4>
                <div id="output2-content"></div>
            </div>
        </div>
    </div>
    <script>
        const vscode = acquireVsCodeApi();
        document.getElementById('run-button').addEventListener('click', () => {
            const inputData = document.getElementById('input-data').value;
            vscode.postMessage({ command: 'runPairCheck', input: inputData });
        });
        function escapeHtml(unsafe) {
            return unsafe
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }

      function setSafeHtml(elementId, content, allowFormatting = false) {
            const element = document.getElementById(elementId);
            if (element) {
                if (allowFormatting) {
                    element.innerHTML = escapeHtml(content);
                } else {
                    element.textContent = content;
                }
            }
        }

      window.addEventListener('message', event => {
            const message = event.data;
            switch (message.command) {
                case 'setOutputs':
                    setSafeHtml('output1-content', message.output1, true);
                    setSafeHtml('output2-content', message.output2, true);
                    break;
            }
        });
    </script>
</body>
</html>