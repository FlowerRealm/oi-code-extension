# OI-Code

[![English Documentation](https://img.shields.io/badge/English-Documentation-blue.svg)](../../README.md)

OI-Code 是一个为竞技编程者和学生设计的 Visual Studio Code 扩展，帮助练习编程题目。它提供了一个简化的工作流程，用于编写、编译、运行和测试代码，支持高性能的原生 LLVM 编译器。

## 功能特性

- **原生 LLVM 编译器支持**：使用系统 LLVM/GCC 编译器进行高性能本地编译（3-5倍性能提升）。
- **自动编译器检测**：智能发现和优先选择系统上的可用编译器。
- **跨平台支持**：在 Windows、macOS 和 Linux 上无缝工作，支持自动编译器安装。
- **语言支持**：高效支持 C 和 C++ 编译和执行。
- **题目管理**：创建和组织编程题目及其元数据。
- **对拍功能**：比较两种不同实现的输出（例如，暴力解法与优化解法）。
- **资源限制**：强制执行时间和内存限制以进行公平评估。
- **Webview 集成**：为题目描述和设置提供丰富的 UI。
- **编译器安装**：当未检测到编译器时，一键自动安装 LLVM。

## 环境要求

- **LLVM/GCC 编译器**：Clang、GCC 或其他 C/C++ 编译器（如果缺失会自动安装）
- Visual Studio Code 1.60.0 或更高版本。

## 安装

1. 从 VS Code 市场安装此扩展。
2. 首次使用时，扩展将自动检测并配置可用编译器。
3. 如果未找到编译器，它将提供自动安装 LLVM。

## 使用方法

### 运行代码

1. 在 VS Code 中打开一个 C 或 C++ 文件。
2. 使用命令面板（`Ctrl+Shift+P`）运行 `OI-Code: Run Code`。
3. 在提示时输入程序的输入。
4. 在新面板中查看输出。

### 对拍功能

1. 在 VS Code 中打开同一问题的两个实现。
2. 使用命令面板（`Ctrl+Shift+P`）运行 `OI-Code: Run Pair Check`。
3. 在提示时输入测试输入。
4. 并排比较输出，差异部分会被高亮显示。

### 题目管理

1. 使用 `OI-Code: Create Problem` 创建新的题目结构。
2. 在侧边栏视图中填写题目详细信息。
3. 直接从题目视图保存并运行您的解决方案。

## 扩展设置

此扩展提供了以下设置：

- `oicode.compile.opt`：C/C++ 编译的默认优化级别。
- `oicode.compile.std`：C++ 编译的默认标准。
- `oicode.compile.autoDowngradeClang20`：是否自动降级 Clang 20+ 的 C++17 标准到 C++14 以避免兼容性问题。
- `oicode.compile.disableStackProtector`：在 Windows 上禁用堆栈保护器 (-fno-stack-protector)。这可能提供轻微的性能提升，但会降低安全性。仅在竞技编程环境中启用。

## 性能优化

### 原生编译器架构
最新版本引入了原生编译器架构，提供显著的性能提升：
- **高性能编译**：比传统解决方案快 3-5 倍
- **智能编译器管理**：自动检测、缓存和优先级管理
- **跨平台兼容**：统一支持 Windows、macOS 和 Linux

### 安全改进
- 进程沙箱化，带有适当的资源限制和临时文件清理
- LLVM 安装器下载时进行完整性校验
- Windows 上改进的内存监控机制

### 代码质量改进 (v0.0.2)
- **国际化代码注释**：所有中文注释已翻译为英文，提升代码可读性
- **代码结构优化**：清理冗余代码，整合重复逻辑，改善错误处理
- **项目结构规范**：修复构建产物位置，确保正确的目录结构
- **文档完善**：更新项目文档以反映最新改进
- **构建系统改进**：清理编译产物并优化.gitignore配置

## 已知问题

- 首次运行时编译器检测和安装可能需要一些时间。
- 大量输出可能导致输出面板中的性能问题。

## 版本说明

### 0.0.1

OI-Code 的初始版本，具有基本功能。

## 贡献

有关如何为此项目做出贡献的详细信息，请参见 [CONTRIBUTING.md](./CONTRIBUTING.md)。

## 许可证

本项目根据 MIT 许可证授权 - 有关详细信息，请参见 [LICENSE](LICENSE) 文件。
